{"version":3,"file":"block-board.js","sourceRoot":"","sources":["../src/block-board.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,UAAU,EAAE,QAAQ,EAAe,MAAM,aAAa,CAAC;AAE3E,OAAO,EAAE,YAAY,EAAE,MAAM,gBAAgB,CAAC;AAC9C,OAAO,EAAE,sBAAsB,EAAE,MAAM,6BAA6B,CAAC;AACrE,OAAO,EAAE,mBAAmB,IAAI,MAAM,EAAE,MAAM,0BAA0B,CAAC;AACzE,OAAO,EAAE,wBAAwB,EAAE,MAAM,+BAA+B,CAAC;AACzE,OAAO,EAAE,uBAAuB,EAAE,MAAM,8BAA8B,CAAC;AACvE,OAAO,EAAE,MAAM,EAAE,MAAM,uCAAuC,CAAC;AAC/D,OAAO,EAAE,UAAU,EAAE,MAAM,4CAA4C,CAAC;AAExE,MAAM,OAAO,UAAW,SAAS,MAAM,CACrC,UAAU,CACiB;IAF7B;;QAGsC,YAAO,GAAY,IAAI,CAAC;QACzB,eAAU,GAAoB,EAAE,CAAC;QAczC,gBAAW,GAEtB,SAAS,CAAC;IA+E5B,CAAC;IA7FC,IAAI,SAAS,CAAC,MAAkB;QAC9B,IAAI,CAAC,UAAU,GAAG,CAAC,GAAG,MAAM,CAAC,CAAC;IAChC,CAAC;IACD,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED,IAAI,eAAe;QACjB,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAC3D,OAAQ,EAAmB,CAAC,MAAM,CAAC,GAAG,SAAS,CAAC,CAAC;IACnD,CAAC;IAeD,MAAM,KAAK,cAAc;QACvB,OAAO;YACL,YAAY,EAAE,MAAM;YACpB,iBAAiB,EAAE,UAAU;YAC7B,6BAA6B,EAAE,wBAAwB;YACvD,2BAA2B,EAAE,sBAAsB;YACnD,4BAA4B,EAAE,uBAAuB;SACtD,CAAC;IACJ,CAAC;IAED,UAAU;;QACR,MAAM,MAAM,GAA2B,MAAA,IAAI,CAAC,UAAU,0CAAE,cAAc,CACpE,eAAe,CACU,CAAC;QAE5B,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC;QAEtC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QAErB,IAAI,CAAC,aAAa,CAChB,IAAI,WAAW,CAAC,aAAa,EAAE;YAC7B,MAAM,EAAE,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE;SAC1C,CAAC,CACH,CAAC;IACJ,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAA;;;uBAGQ,IAAI,CAAC,WAAW;2BACZ,IAAI,CAAC,eAAe;;KAE1C,CAAC;IACJ,CAAC;IAED,iBAAiB;QACf,OAAO,IAAI,CAAA;;;;;;uBAMQ,IAAI,CAAC,UAAU;;;;yBAIb,IAAI,CAAC,SAAS;;;;;;;;;2BASZ,IAAI,CAAC,WAAW;+BACZ,IAAI,CAAC,eAAe;;;;KAI9C,CAAC;IACJ,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,OAAO;YAAE,OAAO,IAAI,CAAC,iBAAiB,EAAE,CAAC;;YAC7C,OAAO,IAAI,CAAC,YAAY,EAAE,CAAC;IAClC,CAAC;;AA5EM,iBAAM,GAAG;IACd,YAAY;IACZ,GAAG,CAAA;;;;KAIF;CACF,CAAC;AA1B2B;IAA5B,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;2CAAgC;AACjC;IAA1B,QAAQ,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;8CAA0C;AAczC;IAA1B,QAAQ,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;+CAEA","sourcesContent":["import { html, css, LitElement, property, Constructor } from \"lit-element\";\nimport { Block, BlockLayoutNode, BlockSet } from \"./types\";\nimport { sharedStyles } from \"./sharedStyles\";\nimport { BlockBoardLayoutEditor } from \"./block-board-layout-editor\";\nimport { ScopedElementsMixin as Scoped } from \"@open-wc/scoped-elements\";\nimport { BlockBoardLayoutRenderer } from \"./block-board-layout-renderer\";\nimport { BlockBoardBlockSelector } from \"./block-board-block-selector\";\nimport { Drawer } from \"scoped-material-components/mwc-drawer\";\nimport { IconButton } from \"scoped-material-components/mwc-icon-button\";\n\nexport class BlockBoard extends (Scoped(\n  LitElement\n) as Constructor<LitElement>) {\n  @property({ type: Boolean }) public editing: boolean = true;\n  @property({ type: Array }) private _blockSets: Array<BlockSet> = [];\n\n  set blockSets(blocks: BlockSet[]) {\n    this._blockSets = [...blocks];\n  }\n  get blockSets() {\n    return this._blockSets;\n  }\n\n  get availableBlocks() {\n    const allBlocks = this._blockSets.map((set) => set.blocks);\n    return ([] as Array<Block>).concat(...allBlocks);\n  }\n\n  @property({ type: Array }) blockLayout:\n    | BlockLayoutNode\n    | undefined = undefined;\n\n  static styles = [\n    sharedStyles,\n    css`\n      :host {\n        display: flex;\n      }\n    `,\n  ];\n\n  static get scopedElements() {\n    return {\n      \"mwc-drawer\": Drawer,\n      \"mwc-icon-button\": IconButton,\n      \"block-board-layout-renderer\": BlockBoardLayoutRenderer,\n      \"block-board-layout-editor\": BlockBoardLayoutEditor,\n      \"block-board-block-selector\": BlockBoardBlockSelector,\n    };\n  }\n\n  saveLayout() {\n    const editor: BlockBoardLayoutEditor = this.shadowRoot?.getElementById(\n      \"layout-editor\"\n    ) as BlockBoardLayoutEditor;\n\n    this.blockLayout = editor.blockLayout;\n\n    this.editing = false;\n\n    this.dispatchEvent(\n      new CustomEvent(\"board-saved\", {\n        detail: { blockLayout: this.blockLayout },\n      })\n    );\n  }\n\n  renderLayout() {\n    return html`\n      <block-board-layout-renderer\n        style=\"flex: 1;\"\n        .blockLayout=${this.blockLayout}\n        .availableBlocks=${this.availableBlocks}\n      ></block-board-layout-renderer>\n    `;\n  }\n\n  renderEditingMode() {\n    return html`\n      <mwc-drawer style=\"flex: 1;\">\n        <div class=\"column\">\n          <div class=\"row\" style=\"justify-content: flex-end;\">\n            <mwc-icon-button\n              icon=\"save\"\n              @click=${this.saveLayout}\n            ></mwc-icon-button>\n          </div>\n          <block-board-block-selector\n            .blockSets=${this.blockSets}\n          ></block-board-block-selector>\n        </div>\n\n        <div slot=\"appContent\" class=\"column\" style=\"height: 100%;\">\n          <block-board-layout-editor\n            id=\"layout-editor\"\n            style=\"flex: 1;\"\n            class=\"column\"\n            .blockLayout=${this.blockLayout}\n            .availableBlocks=${this.availableBlocks}\n          ></block-board-layout-editor>\n        </div>\n      </mwc-drawer>\n    `;\n  }\n\n  render() {\n    if (this.editing) return this.renderEditingMode();\n    else return this.renderLayout();\n  }\n}\n"]}